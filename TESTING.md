# Сценарії тестування Team Project Chat

## Підготовка до тестування

### Вимоги:
- Windows OS
- Visual Studio 2022
- .NET 8.0

### Кроки запуску:
1. Відкрити `Team-Project-Chat.sln` у Visual Studio
2. Скомпілювати рішення (Build → Build Solution)

---

## Тест 1: Запуск сервера

### Мета: Переконатися, що сервер запускається і слухає підключення

**Кроки:**
1. Встановити проект `Server` як стартовий (правою кнопкою → Set as Startup Project)
2. Запустити проект (F5 або Start)
3. Відкриється вікно сервера
4. Натиснути кнопку "Start"

**Очікуваний результат:**
- У логах з'являється повідомлення "Server started, Port: 9000"
- Статус показує "Status: Disconnected" (або інший початковий статус)
- База даних завантажується або створюється новий файл `local_db.json`

---

## Тест 2: Реєстрація нового користувача

### Мета: Перевірити реєстрацію та автоматичний вхід

**Передумови:**
- Сервер запущено
- База даних порожня або користувач з таким ім'ям не існує

**Кроки:**
1. Запустити другий екземпляр Visual Studio або встановити проект `Team-Project-Chat` як стартовий
2. Запустити клієнт (F5)
3. У формі логіну ввести:
   - Логін: `testuser1`
   - Пароль: `password123`
4. Натиснути кнопку "Зареєструватися"

**Очікуваний результат:**
- Форма логіну закривається
- Відкривається вікно чату
- У заголовку вікна відображається "Chat Client - testuser1"
- У лівому верхньому куті показується "User: testuser1"
- У списку повідомлень з'являється:
  - "Connected to the server"
  - "Authenticating as testuser1..."
  - "✓ Authentication successful! User ID: 1"
  - "You can now send messages."
- На сервері:
  - Лог показує "Register attempt: testuser1"
  - Лог показує "Registration successful: testuser1 (ID: 1)"
  - Лог показує "New client connected"
  - Лічильник клієнтів: "Clients: 1"

---

## Тест 3: Вхід існуючого користувача

### Мета: Перевірити автентифікацію з існуючими credentials

**Передумови:**
- Сервер запущено
- Користувач `testuser1` вже зареєстрований

**Кроки:**
1. Запустити новий клієнт
2. У формі логіну ввести:
   - Логін: `testuser1`
   - Пароль: `password123`
3. Натиснути кнопку "Увійти"

**Очікуваний результат:**
- Форма логіну закривається
- Відкривається вікно чату
- Успішна автентифікація з тим самим User ID
- На сервері лог показує "Login successful: testuser1 (ID: 1)"

---

## Тест 4: Невдала спроба входу

### Мета: Перевірити обробку невірних credentials

**Передумови:**
- Сервер запущено

**Кроки:**
1. Запустити клієнт
2. У формі логіну ввести:
   - Логін: `nonexistent`
   - Пароль: `wrongpass`
3. Натиснути кнопку "Увійти"

**Очікуваний результат:**
- У чаті з'являється повідомлення "✗ Authentication failed: Invalid username or password"
- Повідомлення "Please restart and try again."
- Користувач НЕ може відправляти повідомлення
- На сервері: "Login failed: nonexistent"

---

## Тест 5: Дублікат при реєстрації

### Мета: Перевірити що неможливо зареєструвати існуюче ім'я

**Передумови:**
- Сервер запущено
- Користувач `testuser1` вже зареєстрований

**Кроки:**
1. Запустити клієнт
2. У формі логіну ввести:
   - Логін: `testuser1`
   - Пароль: `anypassword`
3. Натиснути кнопку "Зареєструватися"

**Очікуваний результат:**
- У чаті з'являється повідомлення про помилку автентифікації
- На сервері: "Registration failed: testuser1"
- Новий користувач НЕ створюється

---

## Тест 6: Відправка повідомлень

### Мета: Перевірити відправку та отримання повідомлень

**Передумови:**
- Сервер запущено
- Два клієнти автентифіковані (user1 та user2)

**Кроки (Клієнт 1):**
1. У полі вводу написати "Привіт всім!"
2. Натиснути кнопку "Send"

**Очікуваний результат:**

**На Клієнті 1:**
- У списку повідомлень з'являється "You: Привіт всім!"
- Поле вводу очищується

**На Клієнті 2:**
- У списку повідомлень з'являється "user1: Привіт всім!"

**На Сервері:**
- У логах: "<user1>: Привіт всім!"
- Повідомлення зберігається в `local_db.json`
- Лічильник повідомлень у базі даних +1

---

## Тест 7: Множинні клієнти

### Мета: Перевірити роботу з кількома одночасними клієнтами

**Передумови:**
- Сервер запущено

**Кроки:**
1. Запустити 3-5 клієнтів
2. Зареєструвати кожного з різними іменами (user1, user2, user3...)
3. Відправити повідомлення з кожного клієнта

**Очікуваний результат:**
- На сервері відображається правильна кількість підключених клієнтів
- Кожне повідомлення видно всім клієнтам
- Повідомлення правильно підписані іменем відправника
- Жоден клієнт не бачить дублікатів своїх повідомлень від сервера

---

## Тест 8: Відключення клієнта

### Мета: Перевірити коректну обробку відключення

**Передумови:**
- Сервер запущено
- 2 клієнти підключені

**Кроки:**
1. Закрити одного клієнта (хрестик або Alt+F4)

**Очікуваний результат:**
- На сервері:
  - Лог показує "Client disconnected: [username]"
  - Лічильник клієнтів зменшується
- Інші клієнти продовжують нормально працювати
- Можна відправляти повідомлення з решти клієнтів

---

## Тест 9: Перезапуск сервера

### Мета: Перевірити збереження даних після перезапуску

**Передумови:**
- Сервер запущено
- Є зареєстровані користувачі та повідомлення

**Кроки:**
1. Зупинити сервер (кнопка "Stop" або закрити вікно)
2. Перевірити наявність файлу `local_db.json`
3. Запустити сервер знову
4. Спробувати увійти з існуючим користувачем

**Очікуваний результат:**
- Файл `local_db.json` містить всіх користувачів і повідомлення
- При запуску сервер завантажує базу даних
- Існуючі користувачі можуть увійти
- В логах: "База даних успішно завантажена!"

---

## Тест 10: Порожнє повідомлення

### Мета: Перевірити валідацію вводу

**Передумови:**
- Клієнт автентифікований

**Кроки:**
1. Залишити поле вводу порожнім (або ввести лише пробіли)
2. Натиснути "Send"

**Очікуваний результат:**
- Повідомлення НЕ відправляється
- Немає помилок
- Клієнт залишається підключеним

---

## Тест 11: Довге повідомлення

### Мета: Перевірити обробку довгих повідомлень

**Передумови:**
- Клієнт автентифікований

**Кроки:**
1. Ввести довге повідомлення (500+ символів)
2. Натиснити "Send"

**Очікуваний результат:**
- Повідомлення відправляється повністю
- Всі клієнти отримують повне повідомлення
- Повідомлення зберігається в базі даних
- Немає обрізання або помилок

---

## Контрольний список перед релізом

- [ ] Сервер запускається без помилок
- [ ] Реєстрація працює коректно
- [ ] Логін працює коректно
- [ ] Обробка помилок автентифікації
- [ ] Відправка повідомлень працює
- [ ] Отримання повідомлень працює
- [ ] Множинні клієнти працюють одночасно
- [ ] Відключення клієнтів обробляється коректно
- [ ] База даних зберігається і завантажується
- [ ] Паролі приховані при введенні
- [ ] Немає витоків пам'яті при довготривалій роботі
- [ ] UI responsive і не зависає
- [ ] Всі повідомлення правильно відображаються в UTF-8

---

## Відомі обмеження

1. **Безпека**: Паролі зберігаються у відкритому вигляді (потрібно додати хешування)
2. **Масштабованість**: Немає обмеження на кількість з'єднань
3. **Мережа**: Працює тільки на localhost (127.0.0.1)
4. **Платформа**: Тільки Windows (Windows Forms)
5. **Історія**: Немає завантаження старих повідомлень при підключенні
6. **Приватність**: Всі повідомлення broadcast (немає приватних чатів)
